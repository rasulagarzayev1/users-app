(function(e){function t(t){for(var r,o,c=t[0],l=t[1],d=t[2],u=0,p=[];u<c.length;u++)o=c[u],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&p.push(n[o][0]),n[o]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);a&&a(t);while(p.length)p.shift()();return i.push.apply(i,d||[]),s()}function s(){for(var e,t=0;t<i.length;t++){for(var s=i[t],r=!0,c=1;c<s.length;c++){var l=s[c];0!==n[l]&&(r=!1)}r&&(i.splice(t--,1),e=o(o.s=s[0]))}return e}var r={},n={app:0},i=[];function o(t){if(r[t])return r[t].exports;var s=r[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=e,o.c=r,o.d=function(e,t,s){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(s,r,function(t){return e[t]}.bind(null,r));return s},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var a=l;i.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"26a0":function(e,t,s){e.exports=s.p+"img/delete.2ee08849.svg"},5574:function(e,t,s){e.exports=s.p+"img/ordering.a37881a3.svg"},"56d7":function(e,t,s){"use strict";s.r(t);s("e260"),s("e6cf"),s("cca6"),s("a79d");var r=s("7a23");function n(e,t,s,n,i,o){var c=Object(r["k"])("Header"),l=Object(r["k"])("UserList");return Object(r["i"])(),Object(r["d"])(r["a"],null,[Object(r["g"])(c,{onUserSerached:o.onUserSearched},null,8,["onUserSerached"]),Object(r["g"])(l,{"serached-word":i.serachedWord},null,8,["serached-word"])],64)}var i={class:"account-users-header"},o=Object(r["e"])("div",{class:"account-users-header__title-part"},[Object(r["e"])("p",null,"Account users")],-1),c={class:"account-users-header__search-part"},l={for:"search"};function d(e,t,s,n,d,a){return Object(r["i"])(),Object(r["d"])("div",i,[o,Object(r["e"])("div",c,[Object(r["e"])("label",l,[Object(r["p"])(Object(r["e"])("input",{"onUpdate:modelValue":t[0]||(t[0]=function(e){return d.searchedWord=e}),id:"search",name:"search",type:"text",placeholder:"Search"},null,512),[[r["o"],d.searchedWord]])]),Object(r["e"])("button",{type:"button",onClick:t[1]||(t[1]=function(){return a.onUserSearched&&a.onUserSearched.apply(a,arguments)})}," Connect users ")])])}var a={name:"Header",data:function(){return{searchedWord:""}},methods:{onUserSearched:function(){this.$emit("userSerached",this.searchedWord)}}},u=s("6b0d"),p=s.n(u);const h=p()(a,[["render",d]]);var b=h,O=s("66d5"),f=s.n(O),m=s("26a0"),U=s.n(m),j=s("5574"),v=s.n(j),g={class:"account-users-list"},y={class:"account-users-list__controls"},C={key:0},S=Object(r["e"])("img",{src:f.a},null,-1),k=Object(r["f"])(" Edit "),E=[S,k],A=Object(r["e"])("img",{src:U.a},null,-1),_=Object(r["f"])(" Delete "),M=[A,_],w={class:"account-users-list__list-headings"},x={class:"account-users-list-headings__checkbox-part"},I={class:"account-users-list-headings__text-part"},P=Object(r["f"])(" Permissions ");function N(e,t,s,n,i,o){var c=Object(r["k"])("ListItem"),l=Object(r["k"])("EditModal");return Object(r["i"])(),Object(r["d"])(r["a"],null,[Object(r["e"])("div",g,[Object(r["e"])("div",y,[Object(r["e"])("p",null,Object(r["l"])(i.selectedUsersCount)+" users selected",1),1===i.selectedUsersCount?(Object(r["i"])(),Object(r["d"])("button",C,E)):Object(r["c"])("",!0),0!==i.selectedUsersCount?(Object(r["i"])(),Object(r["d"])("button",{key:1,onClick:t[0]||(t[0]=function(){return o.onUserDeleteClicked&&o.onUserDeleteClicked.apply(o,arguments)})},M)):Object(r["c"])("",!0)]),Object(r["e"])("div",w,[Object(r["e"])("div",x,[Object(r["p"])(Object(r["e"])("input",{"onUpdate:modelValue":t[1]||(t[1]=function(e){return i.isAllUsersSelected=e}),type:"checkbox",name:"allUsers",onClick:t[2]||(t[2]=function(){return o.onAllUsersSelected&&o.onAllUsersSelected.apply(o,arguments)})},null,512),[[r["m"],i.isAllUsersSelected]])]),Object(r["e"])("div",I,[Object(r["e"])("p",null,[P,Object(r["e"])("img",{src:v.a,onClick:t[3]||(t[3]=function(){return o.onOrderingClicked&&o.onOrderingClicked.apply(o,arguments)})})])])]),(Object(r["i"])(!0),Object(r["d"])(r["a"],null,Object(r["j"])(i.loadedUsers,(function(e){return Object(r["i"])(),Object(r["d"])("div",{key:e.id},[Object(r["g"])(c,{user:e,"is-all-users-selected":i.isAllUsersSelected,onHandleUserSelection:o.handleUserSelection,onOnUserDeleted:o.onUserDeleteClicked,onOnEditModalOpened:o.handleUserEdit},null,8,["user","is-all-users-selected","onHandleUserSelection","onOnUserDeleted","onOnEditModalOpened"])])})),128))]),Object(r["g"])(l,{"edited-user":i.editedUser,"is-modal-open":i.isModalOpen,onOnUserUpdated:o.onUserUpdated},null,8,["edited-user","is-modal-open","onOnUserUpdated"])],64)}var D=s("2909"),R=s("1da1"),W=(s("4de4"),s("d3b7"),s("caad"),s("2532"),s("b0c0"),s("4e82"),s("fb6a"),s("99af"),s("d81d"),s("96cf"),Object(r["e"])("p",null,"Edit user modal",-1)),T=["value"];function L(e,t,s,n,i,o){return Object(r["i"])(),Object(r["d"])("div",{class:Object(r["h"])(["account-users-edit-modal",i.modalCloseStatus?"":"account-users-edit-modal--active"])},[Object(r["e"])("div",null,[W,Object(r["p"])(Object(r["e"])("input",{"onUpdate:modelValue":t[0]||(t[0]=function(e){return i.userModel.name=e}),type:"text",name:"name",placeholder:"Fullname"},null,512),[[r["o"],i.userModel.name]]),Object(r["p"])(Object(r["e"])("input",{"onUpdate:modelValue":t[1]||(t[1]=function(e){return i.userModel.email=e}),type:"text",name:"email",placeholder:"Email"},null,512),[[r["o"],i.userModel.email]]),Object(r["p"])(Object(r["e"])("select",{"onUpdate:modelValue":t[2]||(t[2]=function(e){return i.userModel.role=e}),name:"permission",id:"permission"},[(Object(r["i"])(!0),Object(r["d"])(r["a"],null,Object(r["j"])(i.permissions,(function(e){return Object(r["i"])(),Object(r["d"])("option",{key:e.id,value:e.id},Object(r["l"])(e.value),9,T)})),128))],512),[[r["n"],i.userModel.role]]),Object(r["e"])("button",{type:"button",class:"account-users-edit-modal__edit-btn",onClick:t[3]||(t[3]=function(){return o.onEditUser&&o.onEditUser.apply(o,arguments)})}," Edit "),Object(r["e"])("button",{type:"button",class:"account-users-edit-modal__close-btn",onClick:t[4]||(t[4]=function(){return o.onCloseModal&&o.onCloseModal.apply(o,arguments)})}," Close ")])],2)}var V={name:"EditModal",props:{editedUser:{default:{}},isModalOpen:{default:!1}},data:function(){return{userModel:{},modalCloseStatus:!0,permissions:[{id:"ACCOUNT_MANAGER",value:"Account manager"},{id:"ADMIN",value:"Admin"},{id:"AGENT",value:"Agent"},{id:"EXTERNAL_REVIEWER",value:"External reviewer"}]}},watch:{editedUser:function(){this.userModel=this.editedUser},isModalOpen:function(){this.modalCloseStatus=this.isModalOpen}},methods:{onCloseModal:function(){this.modalCloseStatus=!0,document.body.style.overflowY="auto"},onEditUser:function(){this.modalCloseStatus=!0,this.$emit("onUserUpdated",this.userModel),document.body.style.overflowY="auto"}}};const H=p()(V,[["render",L]]);var $=H,F=["id"],G={class:"user-info-part"},B=["checked"],X=["src"],Y=["href"],J={class:"user-permission-part"},q={class:"user-permission-part__user-controls"},z=Object(r["e"])("img",{src:f.a},null,-1),K=Object(r["f"])(" Edit "),Q=[z,K],Z=Object(r["e"])("img",{src:U.a},null,-1),ee=[Z];function te(e,t,s,n,i,o){return Object(r["i"])(),Object(r["d"])("div",{id:s.user.id,class:Object(r["h"])(["account-users-list__list-item",i.isUserSelected||s.isAllUsersSelected?"account-users-list__list-item--selected":""]),onClick:t[2]||(t[2]=function(){return o.onUserSlected&&o.onUserSlected.apply(o,arguments)})},[Object(r["e"])("div",G,[Object(r["e"])("input",{type:"checkbox",name:"username",checked:s.isAllUsersSelected||i.isUserSelected},null,8,B),Object(r["e"])("img",{src:s.user.avatar},null,8,X),Object(r["e"])("div",null,[Object(r["e"])("p",null,Object(r["l"])(s.user.name),1),Object(r["e"])("a",{href:"mailto: ".concat(s.user.email)},Object(r["l"])(s.user.email),9,Y)])]),Object(r["e"])("div",J,[Object(r["e"])("div",{class:Object(r["h"])(["user-permission-part__permission-name","user-permission-part__permission-name--".concat(s.user.role)])},Object(r["l"])(o.developPermissionsForUI),3),Object(r["e"])("div",q,[Object(r["e"])("button",{type:"button",onClick:t[0]||(t[0]=function(){return o.onEditUserClicked&&o.onEditUserClicked.apply(o,arguments)})},Q),Object(r["e"])("button",{type:"button",onClick:t[1]||(t[1]=function(){return o.onDeleteUserClicked&&o.onDeleteUserClicked.apply(o,arguments)})},ee)])])],10,F)}var se={name:"ListItem",props:{user:{default:{}},isAllUsersSelected:{type:Boolean,default:!1}},data:function(){return{isUserSelected:!1,selectedItemClassName:"account-users-list__list-item--selected",isEditModalOpen:!1}},computed:{developPermissionsForUI:function(){switch(this.user.role){case"ACCOUNT_MANAGER":return"Account manager";case"ADMIN":return"Admin";case"AGENT":return"Agent";case"EXTERNAL_REVIEWER":return"External reviewer";default:return this.user.role}}},methods:{onUserSlected:function(e){var t=e.currentTarget,s=t.querySelector("input");if("button"!==e.target.type&&"button"!==e.target.parentNode.type){if(!s.checked&&"checkbox"!==e.target.type||"checkbox"===e.target.type&&e.target.checked)return this.isUserSelected=!0,void this.$emit("handleUserSelection",this.isUserSelected,this.user.id);this.isUserSelected=!1,this.$emit("handleUserSelection",this.isUserSelected,this.user.id)}},onEditUserClicked:function(){document.body.style.overflowY="hidden",this.isEditModalOpen=!this.isEditModalOpen,this.$emit("onEditModalOpened",this.user,this.isEditModalOpen)},onDeleteUserClicked:function(){this.$emit("handleUserSelection",!0,this.user.id),this.$emit("onUserDeleted")}}};const re=p()(se,[["render",te]]);var ne=re,ie=s("bc3a"),oe=s.n(ie),ce={components:{ListItem:ne,EditModal:$},name:"UserList",props:{serachedWord:{type:String,default:""}},data:function(){return{loadedUsers:[],users:[],permissionsOrders:{ACCOUNT_MANAGER:1,ADMIN:2,AGENT:3,EXTERNAL_REVIEWER:4},postPerLoad:20,startPoint:20,scrollCount:1,isDescending:!0,isAllUsersSelected:!1,selectedUsersCount:0,selectedUsersIds:[],editedUser:{},isModalOpen:!1}},mounted:function(){var e=this;return Object(R["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getAllUsers();case 2:e.orderUsersByPermissions(),e.getNextUsers();case 4:case"end":return t.stop()}}),t)})))()},watch:{serachedWord:function(){var e=this;this.users=this.users.filter((function(t){return t.name.includes(e.serachedWord)||t.email.includes(e.serachedWord)})),this.orderUsersByPermissions(),this.getNextUsers()}},methods:{getAllUsers:function(){var e=this;return Object(R["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,oe.a.get("https://raw.githubusercontent.com/klausapp/frontend-engineer-test-task/master/users.json");case 3:s=t.sent,e.users=s.data.users,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},orderUsersByPermissions:function(){var e=this;this.users.sort((function(t,s){return e.permissionsOrders[t.role]-e.permissionsOrders[s.role]})),this.getInitialUsersForUI()},getInitialUsersForUI:function(){this.loadedUsers=this.users.slice(0,this.startPoint)},getNextUsers:function(){var e=this;window.onscroll=function(){var t=document.documentElement.scrollTop+window.innerHeight===document.documentElement.offsetHeight;t&&(e.scrollCount++,e.loadedUsers=[].concat(Object(D["a"])(e.loadedUsers),Object(D["a"])(e.users.slice(e.startPoint,e.postPerLoad*e.scrollCount))),e.startPoint=e.startPoint+e.postPerLoad)}},onOrderingClicked:function(e){this.users=this.users.reverse(),this.getInitialUsersForUI(),this.isDescending=!this.isDescending,this.isDescending?e.target.style.transform="rotate(0deg)":e.target.style.transform="rotate(180deg)"},onAllUsersSelected:function(e){if(e.target.checked)return this.isAllUsersSelected=!0,void(this.selectedUsersCount=this.users.length);this.selectedUsersCount=0,this.isAllUsersSelected=!1},onUserDeleteClicked:function(){var e=this;this.isAllUsersSelected?(this.users=[],this.isAllUsersSelected=!1,this.selectedUsersCount=0):this.users=this.users.filter((function(t){return!e.selectedUsersIds.includes(t.id)})),this.orderUsersByPermissions(),this.getNextUsers()},handleUserSelection:function(e,t){if(e)return this.selectedUsersCount++,void this.selectedUsersIds.push(t);this.selectedUsersCount>0&&(this.selectedUsersCount--,this.selectedUsersIds=this.selectedUsersIds.filter((function(e){return e!==t})))},handleUserEdit:function(e,t){this.editedUser=e,this.isModalOpen=t},onUserUpdated:function(e){this.loadedUsers=this.loadedUsers.map((function(t){return t.id===e.id?Object.assign({},e):t}))}}};const le=p()(ce,[["render",N]]);var de=le,ae={name:"App",components:{Header:b,UserList:de},data:function(){return{serachedWord:""}},methods:{onUserSearched:function(e){this.serachedWord=e}}};const ue=p()(ae,[["render",n]]);var pe=ue;s("6418");Object(r["b"])(pe).mount("#app")},6418:function(e,t,s){},"66d5":function(e,t,s){e.exports=s.p+"img/edit.512f2655.svg"}});
//# sourceMappingURL=app.9d194f11.js.map