(function(e){function t(t){for(var r,c,o=t[0],l=t[1],a=t[2],u=0,p=[];u<o.length;u++)c=o[u],Object.prototype.hasOwnProperty.call(n,c)&&n[c]&&p.push(n[c][0]),n[c]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);d&&d(t);while(p.length)p.shift()();return i.push.apply(i,a||[]),s()}function s(){for(var e,t=0;t<i.length;t++){for(var s=i[t],r=!0,o=1;o<s.length;o++){var l=s[o];0!==n[l]&&(r=!1)}r&&(i.splice(t--,1),e=c(c.s=s[0]))}return e}var r={},n={app:0},i=[];function c(t){if(r[t])return r[t].exports;var s=r[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,c),s.l=!0,s.exports}c.m=e,c.c=r,c.d=function(e,t,s){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(c.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(s,r,function(t){return e[t]}.bind(null,r));return s},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/users-app/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var a=0;a<o.length;a++)t(o[a]);var d=l;i.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"26a0":function(e,t,s){e.exports=s.p+"img/delete.2ee08849.svg"},5574:function(e,t,s){e.exports=s.p+"img/ordering.a37881a3.svg"},"56d7":function(e,t,s){"use strict";s.r(t);s("e260"),s("e6cf"),s("cca6"),s("a79d");var r=s("7a23");function n(e,t,s,n,i,c){var o=Object(r["k"])("page-header"),l=Object(r["k"])("user-list");return Object(r["i"])(),Object(r["d"])(r["a"],null,[Object(r["g"])(o,{onUserSerached:c.onUserSearched},null,8,["onUserSerached"]),Object(r["g"])(l,{"serached-word":i.serachedWord},null,8,["serached-word"])],64)}var i={class:"account-users-header"},c=Object(r["e"])("div",{class:"account-users-header__title-part"},[Object(r["e"])("p",null,"Account users")],-1),o={class:"account-users-header__search-part"},l={for:"search"},a=Object(r["f"])(" Connect users "),d=[a];function u(e,t,s,n,a,u){var p=Object(r["l"])("wave");return Object(r["i"])(),Object(r["d"])("div",i,[c,Object(r["e"])("div",o,[Object(r["e"])("label",l,[Object(r["q"])(Object(r["e"])("input",{"onUpdate:modelValue":t[0]||(t[0]=function(e){return a.searchedWord=e}),id:"search",name:"search",type:"text",placeholder:"Search",onKeyup:t[1]||(t[1]=Object(r["r"])((function(){return u.onUserSearched&&u.onUserSearched.apply(u,arguments)}),["enter"]))},null,544),[[r["p"],a.searchedWord]])]),Object(r["q"])((Object(r["i"])(),Object(r["d"])("button",{type:"button",onClick:t[2]||(t[2]=function(){return u.onUserSearched&&u.onUserSearched.apply(u,arguments)})},d)),[[p,u.vaweStyle]])])])}s("498a");var p={name:"PageHeader",inject:["vaweStyle"],data:function(){return{searchedWord:""}},methods:{onUserSearched:function(){this.searchedWord.trim()&&this.$emit("userSerached",this.searchedWord)}}},h=s("6b0d"),b=s.n(h);const O=b()(p,[["render",u]]);var m=O,f={class:"account-users-list"},j={class:"account-users-list__controls"},U=["src"],v=Object(r["f"])(" Edit "),g=["src"],y=Object(r["f"])(" Delete "),S={class:"account-users-list__list-headings"},C={class:"account-users-list-headings__checkbox-part"},E={class:"account-users-list-headings__text-part"},k=Object(r["f"])(" Permissions "),w=["src"],A={key:0,class:"account-users-list__user-not-found"};function _(e,t,n,i,c,o){var l=Object(r["k"])("list-item"),a=Object(r["k"])("edit-modal"),d=Object(r["l"])("wave");return Object(r["i"])(),Object(r["d"])(r["a"],null,[Object(r["e"])("div",f,[Object(r["e"])("div",j,[Object(r["e"])("p",null,Object(r["m"])(c.selectedUsersCount)+" users selected",1),1===c.selectedUsersCount?Object(r["q"])((Object(r["i"])(),Object(r["d"])("button",{key:0,onClick:t[0]||(t[0]=function(){return o.onUserEditClicked&&o.onUserEditClicked.apply(o,arguments)})},[Object(r["e"])("img",{src:s("66d5")},null,8,U),v])),[[d,o.vaweStyle]]):Object(r["c"])("",!0),0!==c.selectedUsersCount?Object(r["q"])((Object(r["i"])(),Object(r["d"])("button",{key:1,onClick:t[1]||(t[1]=function(){return o.onUserDeleteClicked&&o.onUserDeleteClicked.apply(o,arguments)})},[Object(r["e"])("img",{src:s("26a0")},null,8,g),y])),[[d,o.vaweStyle]]):Object(r["c"])("",!0)]),Object(r["e"])("div",S,[Object(r["e"])("div",C,[Object(r["q"])(Object(r["e"])("input",{"onUpdate:modelValue":t[2]||(t[2]=function(e){return c.isAllUsersSelected=e}),type:"checkbox",name:"allUsers",onClick:t[3]||(t[3]=function(){return o.onAllUsersSelected&&o.onAllUsersSelected.apply(o,arguments)})},null,512),[[r["n"],c.isAllUsersSelected]])]),Object(r["e"])("div",E,[Object(r["e"])("p",null,[k,Object(r["e"])("img",{src:s("5574"),onClick:t[4]||(t[4]=function(){return o.onOrderingClicked&&o.onOrderingClicked.apply(o,arguments)})},null,8,w)])])]),(Object(r["i"])(!0),Object(r["d"])(r["a"],null,Object(r["j"])(c.loadedUsers,(function(e){return Object(r["i"])(),Object(r["d"])("div",{key:e.id},[Object(r["g"])(l,{user:e,"is-all-users-selected":c.isAllUsersSelected,onHandleUserSelection:o.handleUserSelection,onOnUserDeleted:o.onUserDeleteClicked,onOnEditModalOpened:o.handleUserEdit},null,8,["user","is-all-users-selected","onHandleUserSelection","onOnUserDeleted","onOnEditModalOpened"])])})),128)),0===c.users.length?(Object(r["i"])(),Object(r["d"])("p",A," No user found ")):Object(r["c"])("",!0)]),Object(r["g"])(a,{"edited-user":c.editedUser,"is-modal-open":c.isModalOpen,onOnUserUpdated:o.onUserUpdated},null,8,["edited-user","is-modal-open","onOnUserUpdated"])],64)}var M=s("2909"),x=s("1da1"),I=(s("4de4"),s("d3b7"),s("caad"),s("2532"),s("b0c0"),s("4e82"),s("fb6a"),s("99af"),s("d81d"),s("7db0"),s("96cf"),s("bc3a")),N=s.n(I),P={class:"account-users-edit-modal__container"},D=Object(r["e"])("h2",null,"Edit user modal",-1),V={key:0},R={key:0},W=["value"],q=Object(r["f"])(" Edit "),L=[q],T=Object(r["f"])(" Close "),$=[T];function F(e,t,s,n,i,c){var o=Object(r["l"])("wave");return Object(r["i"])(),Object(r["d"])("div",{class:Object(r["h"])(["account-users-edit-modal",i.modalCloseStatus?"":"account-users-edit-modal--active"])},[Object(r["e"])("div",P,[D,Object(r["e"])("div",null,[Object(r["q"])(Object(r["e"])("input",{"onUpdate:modelValue":t[0]||(t[0]=function(e){return i.userModel.name=e}),type:"text",name:"name",placeholder:"Fullname",onInput:t[1]||(t[1]=function(){return c.validateNameOnChanged&&c.validateNameOnChanged.apply(c,arguments)})},null,544),[[r["p"],i.userModel.name]]),i.isNameValid?Object(r["c"])("",!0):(Object(r["i"])(),Object(r["d"])("p",V,"Username must be filled!"))]),Object(r["e"])("div",null,[Object(r["q"])(Object(r["e"])("input",{"onUpdate:modelValue":t[2]||(t[2]=function(e){return i.userModel.email=e}),type:"text",name:"email",placeholder:"Email",onInput:t[3]||(t[3]=function(){return c.validateEmailOnChanged&&c.validateEmailOnChanged.apply(c,arguments)})},null,544),[[r["p"],i.userModel.email]]),i.isEmailValid?Object(r["c"])("",!0):(Object(r["i"])(),Object(r["d"])("p",R," Email must be filled and must be in correct format! "))]),Object(r["e"])("div",null,[Object(r["q"])(Object(r["e"])("select",{"onUpdate:modelValue":t[4]||(t[4]=function(e){return i.userModel.role=e}),name:"permission",id:"permission"},[(Object(r["i"])(!0),Object(r["d"])(r["a"],null,Object(r["j"])(i.permissions,(function(e){return Object(r["i"])(),Object(r["d"])("option",{key:e.id,value:e.id},Object(r["m"])(e.value),9,W)})),128))],512),[[r["o"],i.userModel.role]])]),Object(r["q"])((Object(r["i"])(),Object(r["d"])("button",{type:"button",class:"account-users-edit-modal__edit-btn",onClick:t[5]||(t[5]=function(){return c.onEditUser&&c.onEditUser.apply(c,arguments)})},L)),[[o,c.vaweStyle]]),Object(r["q"])((Object(r["i"])(),Object(r["d"])("button",{type:"button",class:"account-users-edit-modal__close-btn",onClick:t[6]||(t[6]=function(){return c.onCloseModal&&c.onCloseModal.apply(c,arguments)})},$)),[[o,c.vaweStyle]])])],2)}s("ac1f"),s("00b4");var G={name:"EditModal",props:{editedUser:{default:{}},isModalOpen:{default:!1}},inject:["vaweStyle"],data:function(){return{userModel:{},modalCloseStatus:!0,permissions:[{id:"ACCOUNT_MANAGER",value:"Account manager"},{id:"ADMIN",value:"Admin"},{id:"AGENT",value:"Agent"},{id:"EXTERNAL_REVIEWER",value:"External reviewer"}],isNameValid:!0,isEmailValid:!0}},watch:{editedUser:function(){this.userModel=this.editedUser},isModalOpen:function(){this.modalCloseStatus=this.isModalOpen}},methods:{onCloseModal:function(){this.modalCloseStatus=!0,document.body.style.overflowY="auto"},onEditUser:function(){this.isNameValid&&this.isEmailValid&&(this.modalCloseStatus=!0,this.$emit("onUserUpdated",this.userModel),document.body.style.overflowY="auto")},validateNameOnChanged:function(){this.userModel.name.trim()?this.isNameValid=!0:this.isNameValid=!1},validateEmailOnChanged:function(){this.userModel.email.trim()&&/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(this.userModel.email)?this.isEmailValid=!0:this.isEmailValid=!1}}};const H=b()(G,[["render",F]]);var B=H,X=["id"],Y={class:"user-info-part"},J=["checked"],K=["src"],z=["href"],Q={class:"user-permission-part"},Z={class:"user-permission-part__user-controls"},ee=["src"],te=Object(r["f"])(" Edit "),se=["src"];function re(e,t,n,i,c,o){var l=Object(r["l"])("wave");return Object(r["q"])((Object(r["i"])(),Object(r["d"])("div",{class:Object(r["h"])(["account-users-list__list-item",c.isUserSelected||n.isAllUsersSelected?"account-users-list__list-item--selected":""]),id:n.user.id,onClick:t[3]||(t[3]=function(){return o.onUserSlected&&o.onUserSlected.apply(o,arguments)})},[Object(r["e"])("div",Y,[Object(r["e"])("input",{type:"checkbox",name:"username",checked:n.isAllUsersSelected||c.isUserSelected},null,8,J),Object(r["e"])("img",{src:n.user.avatar,alt:"avatar",onError:t[0]||(t[0]=function(){return o.onImageLoadError&&o.onImageLoadError.apply(o,arguments)})},null,40,K),Object(r["e"])("div",null,[Object(r["e"])("p",null,Object(r["m"])(n.user.name),1),Object(r["e"])("a",{href:"mailto: ".concat(n.user.email)},Object(r["m"])(n.user.email),9,z)])]),Object(r["e"])("div",Q,[Object(r["e"])("div",{class:Object(r["h"])(["user-permission-part__permission-name","user-permission-part__permission-name--".concat(n.user.role)])},Object(r["m"])(o.developPermissionsForUI),3),Object(r["e"])("div",Z,[Object(r["q"])((Object(r["i"])(),Object(r["d"])("button",{type:"button",onClick:t[1]||(t[1]=function(){return o.onEditUserClicked&&o.onEditUserClicked.apply(o,arguments)})},[Object(r["e"])("img",{src:s("66d5")},null,8,ee),te])),[[l,o.vaweStyle]]),Object(r["q"])((Object(r["i"])(),Object(r["d"])("button",{type:"button",onClick:t[2]||(t[2]=function(){return o.onDeleteUserClicked&&o.onDeleteUserClicked.apply(o,arguments)})},[Object(r["e"])("img",{src:s("26a0")},null,8,se)])),[[l,o.vaweStyle]])])])],10,X)),[[l,o.vaweStyle]])}var ne={name:"ListItem",props:{user:{default:{}},isAllUsersSelected:{type:Boolean,default:!1}},inject:["vaweStyle"],data:function(){return{isUserSelected:!1,selectedItemClassName:"account-users-list__list-item--selected",isEditModalOpen:!1,isImageLoaded:!1}},computed:{developPermissionsForUI:function(){switch(this.user.role){case"ACCOUNT_MANAGER":return"Account manager";case"ADMIN":return"Admin";case"AGENT":return"Agent";case"EXTERNAL_REVIEWER":return"External reviewer";default:return this.user.role}}},watch:{isAllUsersSelected:function(){this.isAllUsersSelected&&(this.isUserSelected=!1)}},methods:{onUserSlected:function(e){var t=e.currentTarget,s=t.querySelector("input");if("button"!==e.target.type&&"button"!==e.target.parentNode.type){if(!s.checked&&"checkbox"!==e.target.type||"checkbox"===e.target.type&&e.target.checked)return this.isUserSelected=!0,void this.$emit("handleUserSelection",this.isUserSelected,this.user.id);this.isUserSelected=!1,this.$emit("handleUserSelection",this.isUserSelected,this.user.id)}},onEditUserClicked:function(){document.body.style.overflowY="hidden",this.isEditModalOpen=!this.isEditModalOpen,this.$emit("onEditModalOpened",this.user,this.isEditModalOpen)},onDeleteUserClicked:function(){this.$emit("handleUserSelection",!0,this.user.id),this.$emit("onUserDeleted")},onImageLoadError:function(e){e.target.src=s("bdf7")}}};const ie=b()(ne,[["render",re]]);var ce=ie,oe={components:{ListItem:ce,EditModal:B},name:"UserList",props:{serachedWord:{type:String,default:""}},inject:["vaweStyle"],data:function(){return{loadedUsers:[],users:[],permissionsOrders:{ACCOUNT_MANAGER:1,ADMIN:2,AGENT:3,EXTERNAL_REVIEWER:4},postPerLoad:20,startPoint:20,scrollCount:1,isDescending:!0,isAllUsersSelected:!1,selectedUsersIds:[],selectedUsersCount:0,editedUser:{},isModalOpen:!1}},mounted:function(){var e=this;return Object(x["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getAllUsers();case 2:e.orderUsersByPermissions(),e.getNextUsers();case 4:case"end":return t.stop()}}),t)})))()},watch:{serachedWord:function(){var e=this;this.users=this.users.filter((function(t){return t.name.includes(e.serachedWord)||t.email.includes(e.serachedWord)})),this.orderUsersByPermissions(),this.getNextUsers()}},methods:{getAllUsers:function(){var e=this;return Object(x["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,N.a.get("https://raw.githubusercontent.com/klausapp/frontend-engineer-test-task/master/users.json");case 3:s=t.sent,e.users=s.data.users,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},orderUsersByPermissions:function(){var e=this;this.users.sort((function(t,s){return e.permissionsOrders[t.role]-e.permissionsOrders[s.role]})),this.getInitialUsersForUI()},getInitialUsersForUI:function(){this.loadedUsers=this.users.slice(0,this.startPoint)},getNextUsers:function(){var e=this;window.onscroll=function(){var t=document.documentElement.scrollTop+window.innerHeight===document.documentElement.offsetHeight;t&&(e.scrollCount++,e.loadedUsers=[].concat(Object(M["a"])(e.loadedUsers),Object(M["a"])(e.users.slice(e.startPoint,e.postPerLoad*e.scrollCount))),e.startPoint=e.startPoint+e.postPerLoad)}},onOrderingClicked:function(e){this.users=this.users.reverse(),this.getInitialUsersForUI(),this.isDescending=!this.isDescending,this.isDescending?e.target.style.transform="rotate(0deg)":e.target.style.transform="rotate(180deg)"},onAllUsersSelected:function(e){if(e.target.checked)return this.isAllUsersSelected=!0,void(this.selectedUsersCount=this.users.length);this.selectedUsersCount=0,this.isAllUsersSelected=!1},onUserDeleteClicked:function(){var e=this;this.isAllUsersSelected?(this.users=[],this.isAllUsersSelected=!1,this.selectedUsersCount=0):(this.users=this.users.filter((function(t){return!e.selectedUsersIds.includes(t.id)})),this.selectedUsersIds=[],this.selectedUsersCount=0),this.orderUsersByPermissions(),this.getNextUsers()},handleUserSelection:function(e,t){if(e)return this.selectedUsersCount++,void this.selectedUsersIds.push(t);this.selectedUsersCount>0&&(this.selectedUsersCount--,this.selectedUsersIds=this.selectedUsersIds.filter((function(e){return e!==t})))},handleUserEdit:function(e,t){this.editedUser=e,this.isModalOpen=t},onUserUpdated:function(e){this.loadedUsers=this.loadedUsers.map((function(t){return t.id===e.id?Object.assign({},e):t}))},onUserEditClicked:function(){var e=this;this.editedUser=this.loadedUsers.find((function(t){return t.id===e.selectedUsersIds[0]})),this.isModalOpen=!this.isModalOpen}}};const le=b()(oe,[["render",_]]);var ae=le,de={name:"App",components:{PageHeader:m,UserList:ae},data:function(){return{serachedWord:""}},provide:function(){return{vaweStyle:{color:"black",startingOpacity:.3,easing:"ease-in"}}},methods:{onUserSearched:function(e){this.serachedWord=e}}};const ue=b()(de,[["render",n]]);var pe=ue,he=(s("6418"),s("d71b"));Object(r["b"])(pe).use(he["a"]).mount("#app")},6418:function(e,t,s){},"66d5":function(e,t,s){e.exports=s.p+"img/edit.512f2655.svg"},bdf7:function(e,t,s){e.exports=s.p+"img/defaultAvatar.7b28486a.jpg"}});
//# sourceMappingURL=app.9d46b038.js.map